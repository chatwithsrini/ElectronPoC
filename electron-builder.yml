appId: com.presidio.electron-poc
productName: DentalXChange Electron-POC
directories:
  output: release
  buildResources: build

# Build configuration (buildVersion defaults to package.json version; do not use ${version} here or rcedit fails)
compression: normal
removePackageScripts: true

files:
  - dist/**/*
  - main.js
  - preload.js
  - package.json
  - src/utils/**/*
  - "!node_modules/**/{CHANGELOG.md,README.md,README,readme.md,readme}"
  - "!node_modules/**/{test,__tests__,tests,powered-test,example,examples}"
  - "!node_modules/**/*.d.ts"
  - "!node_modules/**/*.map"
  - "!node_modules/**/.{bin,git,nyc_output,coverage}"
  - "!node_modules/**/.{eslint,mocha,prettier,jest,ava,tslint,tsd,eslintcache,stylelintcache}"
  # Exclude odbc from the 64-bit build (Eaglesoft uses external 32-bit Node.js bridge)
  - "!node_modules/odbc/**/*"

# Include app icon in packaged resources so the running app can use it (taskbar, etc.)
extraResources:
  - from: build/installer.ico
    to: installer.ico

win:
  target:
    - target: nsis
      arch:
        - x64
  # Path relative to buildResources (build/); this embeds the icon in the .exe
  icon: installer.ico
  requestedExecutionLevel: requireAdministrator
  # true = embed installer.ico in the app .exe (requires Admin or Developer Mode for first build)
  signAndEditExecutable: true
  verifyUpdateCodeSignature: false

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  allowElevation: true
  createDesktopShortcut: always
  createStartMenuShortcut: true
  installerIcon: build/installer.ico
  uninstallerIcon: build/installer.ico
  installerHeaderIcon: build/installer.ico
  include: build/installer.nsh
  artifactName: ${productName}-${version}-Setup.${ext}
  deleteAppDataOnUninstall: true
  warningsAsErrors: false
  # Custom installer settings
  displayLanguageSelector: false
  # installerHeader: none  # Removed - use default header
  # installerSidebar: none  # Removed - use default sidebar
  # uninstallerSidebar: none  # Removed - use default sidebar
  # MUI settings for modern look
  unicode: true
  perMachine: true
  runAfterFinish: true
  menuCategory: true

mac:
  target: dmg
  category: public.app-category.utilities

linux:
  target: AppImage

